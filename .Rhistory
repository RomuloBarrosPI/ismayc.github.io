# Load the packages into the current environment
lapply(pkg, library, character.only = TRUE)
# Set number of digits to display
#options(digits = 2)
set.seed(2016)
treatment <- c(rep("desipramine", 24), rep("lithium", 24), rep("placebo", 24))
relapse <- c(rep("Yes", 10), rep("No", 14), rep("Yes", 18), rep("No", 6),
rep("Yes", 20), rep("No", 4))
cocaine <- data_frame(treatment, relapse)
View(cocaine)
treatment <- c(rep("desipramine", 24), rep("lithium", 24), rep("placebo", 24))
relapse <- c(rep("Yes", 10), rep("No", 14), rep("Yes", 18), rep("No", 6),
rep("Yes", 20), rep("No", 4))
relapse <- factor(relapse, levels = c("Yes", "No"))
cocaine <- data_frame(treatment, relapse)
table(treatment, relapse)
?kable
?beamer_presentation
?beamer_presentation
0.3*0.62 + 0.46*0.35 + 0.24*0.58
V <- 0.3*0.62 + 0.46*0.35 + 0.24*0.58
prob <- (0.46 * 0.35) / V
prob
num <- 0.017 * 0.78
num
denom <- num + (0.983*0.1)
denom
num2 <- num / denom
num2
.25 * 14
exp(-1)
exp(-1) + exp(-1)
.3 * .55
.3 - .165
.595 + .165
21/24 - 14/24
gender <- rep(c("M", "F"), each = 24)
promote <- rep(c("Yes", "No"), c(35, 13))
d <- rep(NA, 1000)
for(i in 1:1000) {
newgen <- sample(gender)
tab <- table(newgen, promote)
d[i] <- diff(tab[, 2]/24)
}
hist(d, col = "steelblue", main = "Null Distribution")
abline(v = .29, col = "goldenrod", lwd = 2)
qplot(x = d, color = I("steelblue"), main = "Null Distribution")
library(knitr)
options(digits=2)
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(ggplot2)
gender <- rep(c("M", "F"), each = 24)
promote <- rep(c("Yes", "No"), c(35, 13))
d <- rep(NA, 1000)
for(i in 1:1000) {
newgen <- sample(gender)
tab <- table(newgen, promote)
d[i] <- diff(tab[, 2]/24)
}
hist(d, col = "steelblue", main = "Null Distribution")
abline(v = .29, col = "goldenrod", lwd = 2)
qplot(x = d, color = I("steelblue"), main = "Null Distribution")
gender <- rep(c("M", "F"), each = 24)
promote <- rep(c("Yes", "No"), c(35, 13))
d <- rep(NA, 1000)
for(i in 1:1000) {
newgen <- sample(gender)
tab <- table(newgen, promote)
d[i] <- diff(tab[, 2]/24)
}
hist(d, col = "steelblue", main = "Null Distribution")
abline(v = .29, col = "goldenrod", lwd = 2)
qplot(x = d, color = I("steelblue"), main = "Null Distribution", bins = 8)
gender <- rep(c("M", "F"), each = 24)
promote <- rep(c("Yes", "No"), c(35, 13))
d <- rep(NA, 1000)
for(i in 1:1000) {
newgen <- sample(gender)
tab <- table(newgen, promote)
d[i] <- diff(tab[, 2]/24)
}
hist(d, col = "steelblue", main = "Null Distribution")
abline(v = .29, col = "goldenrod", lwd = 2)
qplot(x = d, fill = I("steelblue"), main = "Null Distribution", bins = 8)
gender <- rep(c("M", "F"), each = 24)
promote <- rep(c("Yes", "No"), c(35, 13))
d <- rep(NA, 1000)
for(i in 1:1000) {
newgen <- sample(gender)
tab <- table(newgen, promote)
d[i] <- diff(tab[, 2]/24)
}
hist(d, col = "steelblue", main = "Null Distribution")
abline(v = .29, col = "goldenrod", lwd = 2)
qplot(x = d, fill = I("steelblue"), colour = I("black"),
main = "Null Distribution", bins = 8)
gender <- rep(c("M", "F"), each = 24)
promote <- rep(c("Yes", "No"), c(35, 13))
d <- rep(NA, 1000)
for(i in 1:1000) {
newgen <- sample(gender)
tab <- table(newgen, promote)
d[i] <- diff(tab[, 2]/24)
}
hist(d, col = "steelblue", main = "Null Distribution")
abline(v = .29, col = "goldenrod", lwd = 2)
qplot(x = d, fill = I("steelblue"), colour = I("black"),
main = "Null Distribution", bins = 8) +
geom_vline(xintercept = 21/24 - 14/24)
gender <- rep(c("M", "F"), each = 24)
promote <- rep(c("Yes", "No"), c(35, 13))
d <- rep(NA, 1000)
for(i in 1:1000) {
newgen <- sample(gender)
tab <- table(newgen, promote)
d[i] <- diff(tab[, 2]/24)
}
hist(d, col = "steelblue", main = "Null Distribution")
abline(v = .29, col = "goldenrod", lwd = 2)
qplot(x = d, fill = I("steelblue"), colour = I("black"),
main = "Null Distribution", bins = 8) +
geom_vline(xintercept = 21/24 - 14/24, colour = "goldenrod")
gender <- rep(c("M", "F"), each = 24)
promote <- rep(c("Yes", "No"), c(35, 13))
d <- rep(NA, 10000)
for(i in 1:10000) {
newgen <- sample(gender)
tab <- table(newgen, promote)
d[i] <- diff(tab[, 2]/24)
}
hist(d, col = "steelblue", main = "Null Distribution")
abline(v = .29, col = "goldenrod", lwd = 2)
qplot(x = d, fill = I("steelblue"), colour = I("black"),
main = "Null Distribution", bins = 8) +
geom_vline(xintercept = 21/24 - 14/24, colour = "goldenrod")
gender <- rep(c("M", "F"), each = 24)
promote <- rep(c("Yes", "No"), c(35, 13))
d <- rep(NA, 10000)
for(i in 1:10000) {
newgen <- sample(gender)
tab <- table(newgen, promote)
d[i] <- diff(tab[, 2]/24)
}
hist(d, col = "steelblue", main = "Null Distribution")
abline(v = .29, col = "goldenrod", lwd = 2)
.3*.55
options(digits = 999)
options(digits = 22)
exp(-3)*(3^2 / factorial(2))
4.5 * exp(-3)
1 - exp(-3)
0.224 / 0.95
?ggsave
# Chunk 1: setup
library(knitr)
#options(digits=2)
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(ggplot2)
library(mosaic)
gender <- rep(c("M", "F"), each = 24)
promote <- rep(c("Yes", "No"), c(35, 13))
D <- rep(NA, 10000)
d_obs <- 21/24 - 14/24
for(i in 1:10000) {
newgen <- sample(gender)
tab <- table(newgen, promote)
D[i] <- diff(tab[, 2]/24)
}
#hist(d, col = "steelblue", main = "Null Distribution")
#abline(v = .29, col = "goldenrod", lwd = 2)
qplot(x = D, fill = I("steelblue"), colour = I("black"),
main = "Null Distribution", bins = 12) +
geom_vline(xintercept = d_obs, colour = "goldenrod")
ggsave("gender_promote.png", device = "png")
getwd()
setwd("/Users/cismay/Google Drive/ismayc.github.io/slides/05")
?knitr::purl
knitr::purl("05B.Rmd", "05B.R")
# load and install packages
pkg <- c("httr", "rjson", "dplyr", "stringr", "devtools", "leaflet")
new.pkg <- pkg[!(pkg %in% installed.packages())]
if (length(new.pkg)) {
install.packages(new.pkg)
}
suppressMessages(library(httr))
suppressMessages(library(rjson))
suppressMessages(library(dplyr))
suppressMessages(library(stringr))
suppressMessages(library(devtools))
suppressMessages(if (!require("leaflet")) devtools::install_github("rstudio/leaflet"))
suppressMessages(library(leaflet))
mean(p_hats$in_tail)
# Chunk 1: setup
library(knitr)
#options(digits=2)
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(ggplot2)
# Chunk 2: prelim
library(ggplot2)
set.seed(53)
# Chunk 3: sim
library(mosaic)
p_hats <- do(10000) * rflip(n = 75)
head(p_hats)
# Chunk 4: dist
qplot(x = prop, data = p_hats, geom = "histogram",
binwidth = .0135, fill = I("white"), col = I("darkgreen"))
mean(p_hats$in_tail)
p_hats
# Chunk 1: setup
library(knitr)
#options(digits=2)
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(ggplot2)
# Chunk 2: prelim
library(ggplot2)
set.seed(53)
# Chunk 3: sim
library(mosaic)
p_hats <- do(10000) * rflip(n = 75)
head(p_hats)
# Chunk 4: dist
qplot(x = prop, data = p_hats, geom = "histogram",
binwidth = .0135, fill = I("white"), col = I("darkgreen"))
# Chunk 5: dist2
library(dplyr)
p_hats <-
p_hats %>%
mutate(in_tail = ifelse(prop >= 2/3,
TRUE, FALSE))
qplot(x = prop, data = p_hats, geom = "histogram", fill = in_tail,
binwidth = .0135, fill = I("white"), col = I("darkgreen")) +
theme(legend.position = "none") +
scale_fill_manual(values = c("white", "darkgreen")) +
geom_vline(xintercept = 2/3, col = "deepskyblue")
mean(p_hats$in_tail)
# Chunk 1: setup
library(knitr)
#options(digits=2)
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(ggplot2)
# Chunk 2: prelim
library(ggplot2)
set.seed(53)
# Chunk 3: sim
library(mosaic)
p_hats <- do(10000) * rflip(n = 75)
head(p_hats)
# Chunk 4: dist
qplot(x = prop, data = p_hats, geom = "histogram",
binwidth = .0135, fill = I("white"), col = I("darkgreen"))
library(dplyr)
p_hats <- p_hats %>%
mutate(in_tail = ifelse(prop >= 2/3, TRUE, FALSE))
qplot(x = prop, data = p_hats, geom = "histogram", fill = in_tail,
binwidth = .0135, fill = I("white"), col = I("darkgreen")) +
theme(legend.position = "none") +
scale_fill_manual(values = c("white", "darkgreen")) +
geom_vline(xintercept = 2/3, col = "deepskyblue")
ggsave("gay_mar_sim.png")
shiny::runGitHub("ProbApp", "ismayc")
?pnorm
pnorm(q = -0.5, mean = 0, sd = 1)
?qnorm
pnorm(p = 0.95, mean = 72.6, sd = 4.78)
1norm(p = 0.95, mean = 72.6, sd = 4.78)
qnorm(p = 0.95, mean = 72.6, sd = 4.78)
input <- rexp(10, 2)
input
input <- rexp(10, 10)
input
input <- rexp(10, 100)
input <- rexp(10, 100)
input
input <- rexp(10, 1/100)
input
input <- round(rexp(10, 100),0)
input
input <- round(rexp(10, 100),1)
input
input <- ceiling(rexp(10, 100))
input
input <- ceiling(rexp(10, 1/100))
input
normal <- rnorm(10, mean = 0, sd = 1)
# Chunk 1
library(ggplot2)
options(digits = 2)
# Chunk 2
input <- c(57, 15, 41, 117, 26, 151, 8, 77, 215, 34)
normal <- rnorm(10, mean = 0, sd = 1)
input
normal
qplot(input)
qplot(input, bins = 5)
qplot(input, bins = 5, col=I("white"))
qplot(input, binwidth = 30, col=I("white"))
qplot(input, binwidth = 20, col=I("white"))
qplot(input, binwidth = 40, col=I("white"))
quantile(input)
qplot(sample = input) + stat_qq()
quantile(input, seq(from = 0, to = 100, by = 10)
quantile(input, seq(from = 0, to = 100, by = 10))
quantile(input, seq(from = 10, to = 100, by = 10))
?quantile
seq(from = 10, to = 100, by = 10)
quantile(input, probs = seq(from = 0.1, to = 1, by = 0.1))
quantile(input, probs = seq(from = 0, to = 1, by = 0.1))
qplot(sample = input) + stat_qq()
quantile(input, probs = seq(from = 0, to = 1, by = 1/9))
quantile(input, probs = seq(from = 0, to = 1, by = 1/(length(input) - 1))
quantile(input, probs = seq(from = 0, to = 1, by = 1/(length(input) - 1)))
quantile(input, probs = seq(from = 0, to = 1, by = 1/(length(input) - 1)))
?qnorm
qnorm(quantiles, mean = 0, sd = 1)
quantiles <- seq(from = 0, to = 1, by = 1/(length(input) - 1))
quantile(input, probs = quantiles)
qnorm(quantiles, mean = 0, sd = 1)
qplot(sample = input) + stat_qq()
install.packages("ggplotly")
devtools::install_github("ropensci/ggplotly")
devtools::install_github("ropensci/plotly")
ggplotly(qplot(sample = input) + stat_qq())
library(ggplot2)
library(plotly)
options(digits = 2)
ggplotly(qplot(sample = input) + stat_qq())
# List of useful packages
pkg <- c("ggplot2", "devtools")
# Check if packages are not installed and assign the
# names of the uninstalled packages to the variable new.pkg
new.pkg <- pkg[!(pkg %in% installed.packages())]
# If there are any packages in the list that aren't installed,
# install them
if (length(new.pkg)) {
install.packages(new.pkg, repos = "http://cran.rstudio.com")
}
if(!require(plotly)){
devtools::install_github("ropensci/plotly")
}
options(digits = 2)
pnorm(-1.546635, 0, 1)
pnorm(-1.000491, 0, 1)
pnorm(-0.6554235, 0, 1)
1/11
qqnorm
quantile(input, 0.061)
?rankit
pnorm(0.6418, 0, 1)
pnorm(1.2672, 0, 1)
quantile(input, probs = seq(from = 0, to = 1, by = 1/9))
quantile(input, 0.061)
nums <- c(65, 75, 16, 22, 43, 40)
ggplotly(qplot(sample = nums) + stat_qq())
norms <- c(−1.2672,   −0.6418,   −0.2016,   0.2016,   0.6418,   1.2672)
norms <- c(-1.2672,   -0.6418,   -0.2016,   0.2016,   0.6418,   1.2672)
pnorm(norms)
quantile(input, c(0.10, 0.26, 0.42, 0.58, 0.74, 0.90))
ggplotly(qqnorm(input))
qqnorm(input)
ggplotly(qplot(sample = input) + stat_qq())
quantiles <- seq(from = 0, to = 1, length = length(input))
quantiles
pnorm(quantiles)
qnorm(quantiles)
qqplot.data <- function (vec) # argument: vector of numbers
{
# following four lines from base R's qqline()
y <- quantile(vec[!is.na(vec)], c(0.25, 0.75))
x <- qnorm(c(0.25, 0.75))
slope <- diff(y)/diff(x)
int <- y[1L] - slope * x[1L]
d <- data.frame(resids = vec)
ggplot(d, aes(sample = resids)) + stat_qq() + geom_abline(slope = slope, intercept = int)
}
qqplot.data(input)
qqplot.data <- function(vec) # argument: vector of numbers
{
# following four lines from base R's qqline()
y <- quantile(vec[!is.na(vec)], c(0.25, 0.75))
x <- qnorm(c(0.25, 0.75))
slope <- diff(y)/diff(x)
int <- y[1] - slope * x[1]
d <- data.frame(resids = vec)
qplot(sample = resids) + stat_qq() + geom_abline(slope = slope, intercept = int)
}
qqplot.data(input)
qqplot.data <- function(vec) # argument: vector of numbers
{
# following four lines from base R's qqline()
y <- quantile(vec[!is.na(vec)], c(0.25, 0.75))
x <- qnorm(c(0.25, 0.75))
slope <- diff(y)/diff(x)
int <- y[1] - slope * x[1]
qplot(sample = vec) + stat_qq() + geom_abline(slope = slope, intercept = int)
}
qqplot.data(input)
qqplot.data <- function(vec) # argument: vector of numbers
{
# following four lines from base R's qqline()
y <- quantile(vec[!is.na(vec)], c(0.25, 0.75))
x <- qnorm(c(0.25, 0.75))
slope <- diff(y)/diff(x)
int <- y[1] - slope * x[1]
ggplotly(qplot(sample = vec) + stat_qq() + geom_abline(slope = slope, intercept = int))
}
qqplot.data(input)
qqplot_line <- function(vec) # argument: vector of numbers
{
# following four lines from base R's qqline()
y <- quantile(vec, c(0.25, 0.75))
x <- qnorm(c(0.25, 0.75))
slope <- diff(y)/diff(x)
int <- y[1] - slope * x[1]
qplot(sample = vec) +
stat_qq() +
geom_abline(slope = slope, intercept = int, col = "deepskyblue")
}
20/500
1-0.397
sqrt(0.397*(0.603)/222 + 0.397*0.603/211)
0.09/0.047
0.09 - 1.96 * 0.047
0.09 + 1.96 * 0.047
install.packages("ggmap")
387/1162
387/1162 * 461
# Chunk 1: setup
library(knitr)
options(digits=3)
knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE, fig.pos = 'center')
library(dplyr)
library(ggplot2)
library(ggmap)
# Chunk 2
d <- read.csv("roadless-data.csv", header = TRUE)
m <- get_map(location = c(-125, 25, -65, 50), source="stamen", maptype = "terrain-background")
# sample locations
ggmap(m) +
geom_point(data = d, aes(x = longitude, y = latitude), alpha = .6)
# Chunk 3
# within continental US
ggmap(m) +
geom_point(data = d, aes(x = longitude, y = latitude, color = factor(withinContinent)), alpha = .6) +
scale_colour_manual(values=c("red", "blue"), guide = FALSE)
# Chunk 4
# within continental US
d2 <- filter(d, withinContinent == 1)
ggmap(m) +
geom_point(data = d2, aes(x = longitude, y = latitude, color = factor(withinContinent)), alpha = .6) +
scale_colour_manual(values=c("blue"), guide = FALSE)
# Chunk 5
ggmap(m) +
geom_point(data = d2, aes(x = longitude, y = latitude, color = factor(within1mile)), alpha = .8) +
scale_colour_manual(values=c("green", "blue"), guide = FALSE)
# Chunk 6: sim3
n <- 412
p <- c(.043, .02, .125, .042, .77)
chisqs <- rep(0, 1000)
set.seed(405)
for(i in 1:1000) {
samp <- sample(c("asian", "black", "hispanic", "other", "white"),
size = n, replace = TRUE, prob = p)
obs <- c(table(samp))
chisqs[i] <- chisq.test(obs, correct = FALSE, p = p)$statistic
}
# Chunk 7
library(ggplot2)
qplot(chisqs, geom = "density") +
stat_function(fun = dchisq, args = c(df = 4), col = "tomato")
# Chunk 8
1 - pchisq(139.64, df = 4)
# Chunk 9
treatment <- rep(c("acu", "sham", "trad"), c(387, 387, 388))
pain <- c(rep(c("reduc", "noreduc"), c(184, 203)),
rep(c("reduc", "noreduc"), c(171, 216)),
rep(c("reduc", "noreduc"), c(106, 282)))
table(pain, treatment)
# Chunk 10
library(ggplot2)
qplot(x = treatment, fill = pain, geom = "bar")
# Chunk 11
chisqs <- rep(0, 1000)
set.seed(405)
for(i in 1:1000) {
shuffled_pain <- sample(pain)
new_tab <- table(shuffled_pain, treatment)
chisqs[i] <- chisq.test(new_tab)$statistic
}
# Chunk 12
qplot(chisqs, geom = "density", xlim = c(0, 40))
# Chunk 13
tab <- table(pain, treatment)
chi_obs <- chisq.test(tab)$statistic
qplot(chisqs, geom = "density", xlim = c(0, 40)) +
geom_vline(xintercept = chi_obs, col = "goldenrod")
# Chunk 14
qplot(chisqs, geom = "density", xlim = c(0, 40)) +
geom_vline(xintercept = chi_obs, col = "goldenrod") +
stat_function(fun = dchisq, args = c(df = 2), col = "tomato")
library(oilabs)
inference(x = treatment, y = pain, est = "proportion", type = "ht",
method = "theoretical")
?inference
purl("08C.Rmd", "08C.R")
getwd()
purl("slides/08/08C.Rmd", "slides/08/08C.R")
